<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/documentation/blog/rss.xml" title="Cloud Adoption Framework for Terraform Landing zones RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/documentation/blog/atom.xml" title="Cloud Adoption Framework for Terraform Landing zones Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-GCM5PJNDCN","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-GCM5PJNDCN"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-GCM5PJNDCN",{anonymize_ip:!0})</script><title data-react-helmet="true">Rover commands | Cloud Adoption Framework for Terraform Landing zones</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://aztfmod.github.io/documentation/docs/rover/rover-commands"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="robots" content="noindex"><meta data-react-helmet="true" property="og:title" content="Rover commands | Cloud Adoption Framework for Terraform Landing zones"><meta data-react-helmet="true" name="description" content="Commonly used commands"><meta data-react-helmet="true" property="og:description" content="Commonly used commands"><link data-react-helmet="true" rel="icon" href="/documentation/img/landingzones.ico"><link data-react-helmet="true" rel="canonical" href="https://aztfmod.github.io/documentation/docs/rover/rover-commands"><link data-react-helmet="true" rel="alternate" href="https://aztfmod.github.io/documentation/docs/rover/rover-commands" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://aztfmod.github.io/documentation/docs/rover/rover-commands" hreflang="x-default"><link rel="stylesheet" href="/documentation/assets/css/styles.e2e0215a.css">
<link rel="preload" href="/documentation/assets/js/runtime~main.63325a91.js" as="script">
<link rel="preload" href="/documentation/assets/js/main.60d61445.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/documentation/"><div class="navbar__logo"><img src="/documentation/img/logo_landingzone.png" alt="Cloud Adoption Framework for Terraform Landing zones." class="themedImage_W2Cr themedImage--light_TfLj"><img src="/documentation/img/logo_landingzone.png" alt="Cloud Adoption Framework for Terraform Landing zones." class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Cloud Adoption Framework</b></a><a class="navbar__item navbar__link navbar__link--active" href="/documentation/docs/intro">Introduction</a><a class="navbar__item navbar__link navbar__link--active" href="/documentation/docs/fundamentals/lz-intro">Fundamentals</a><a class="navbar__item navbar__link navbar__link--active" href="/documentation/docs/module/module-intro">Module</a><a class="navbar__item navbar__link navbar__link--active" href="/documentation/docs/rover/rover-intro">Rover</a><a class="navbar__item navbar__link navbar__link--active" href="/documentation/docs/provider/provider-intro">Provider</a><a class="navbar__item navbar__link navbar__link--active" href="/documentation/docs/enterprise-scale/landingzones/eslz-intro">Enterprise-scale</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/aztfmod/documentation" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/documentation/docs/intro">Welcome to Cloud Adoption Framework Landing zones for Terraform</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/documentation/docs/fundamentals/lz-intro">fundamentals</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/documentation/docs/module/module-intro">module</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/documentation/docs/provider/provider-intro">provider</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/documentation/docs/rover/rover-intro">rover</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/docs/rover/rover-intro">Introduction to the CAF rover</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/docs/rover/rover-tools">Rover versions and tools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/documentation/docs/rover/rover-commands">Rover commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/docs/rover/rover-ignite">Rover Ignite</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/documentation/docs/rover/rover-tfc">Using Terraform Cloud for state management</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/documentation/docs/enterprise-scale/landingzones/eslz-intro">enterprise-scale</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Rover commands</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="commonly-used-commands">Commonly used commands<a class="hash-link" href="#commonly-used-commands" title="Direct link to heading">â€‹</a></h2><p>Beyond a container, rover is your one-stop tool to help on landing zone and landing zones state management. </p><p>What people love about rover is the ubiquity it gives them and seamless transition from local development environment with pipelines. In this articles, you will find the most commonly used commands for rover and some details on the state locator process.</p><p>Rover is by nature multi-subscription, and in landing zones worlds, the subscription where you want to deploy your resource is just another parameter of rover, just as the subscription where to store the state files and locate the launchpad.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="login">Login<a class="hash-link" href="#login" title="Direct link to heading">â€‹</a></h2><p>The first command you will have to run is <code>rover login</code>:</p><p>You can run a plain rover login:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">rover login</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>You can specify additional context to restrict the token, like the tenant name and subscription to use:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">rover login --tenant </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">tenant_name.onmicrosoft.com or tenant_guid </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">optional</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> --subscription </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">subscription_id_to_target</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">optional</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>You can log out running the following command:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">rover </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">logout</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="landing-zones-commands">Landing zones commands<a class="hash-link" href="#landing-zones-commands" title="Direct link to heading">â€‹</a></h2><p>Once authentication is completed, a typical rover command looks like:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">rover </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> -lz /tf/caf/landingzones/caf_launchpad </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> -var-folder /tf/caf/configuration/contoso/platform/level0/launchpad </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> -tfstate_subscription_id a-b-c-d-e </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> -target_subscription f-g-h-i </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> -tfstate caf_launchpad.tfstate </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> -log-severity ERROR </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> -launchpad </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> -env contoso </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> -level level0 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> -p </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${TF_DATA_DIR}</span><span class="token plain">/caf_launchpad.tfstate.tfplan </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> -a plan</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The following table summarizes the most common parameters and their default values:</p><table><thead><tr><th>argument</th><th>required</th><th>default value</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td>-lz</td><td>yes</td><td>N/A</td><td>Path to landing zone (<code>.tf</code> files) to be executed. This is typically <code>/tf/caf/landingzones/caf_launchpad</code>  , <code>/tf/caf/landingzones/caf_solution</code> or any add-ons from <code>/tf/caf/landingzones/caf_solution/add-ons</code>. This could also be your own custom written Terraform files.</td><td>/tf/caf/landingzones/caf_launchpad</td></tr><tr><td>-var-folder</td><td>yes</td><td>N/A</td><td>Path to the set of configuration files. All <code>.tfvars</code> files in directory will be expanded.</td><td>/tf/caf/configuration/contoso/platform/level0/launchpad</td></tr><tr><td>-env</td><td>yes</td><td>N/A</td><td>String that defines a name for an environment to use. This is defined as  (used in the state locator function as described below.)</td><td><code>contoso</code></td></tr><tr><td>-level</td><td>yes</td><td>N/A</td><td>Specifies the level in the CAF hierarchy where to deploy the resources (possible value are level1-level4)</td><td><code>level1</code></td></tr><tr><td>-a</td><td>yes</td><td>N/A</td><td>Action to take with the current parameters, possible values are <code>plan</code>, <code>apply</code>, <code>destroy</code>, <code>validate</code>, <code>refresh</code>, <code>graph</code>, <code>import</code>, <code>output</code>, <code>taint</code>, <code>untaint</code>, <code>&#x27;state list&#x27;</code>, <code>&#x27;state rm&#x27;</code>, <code>&#x27;state show&#x27;</code></td><td><code>plan</code></td></tr><tr><td>-log-severity</td><td>no</td><td>ERROR</td><td>Specifies the Terraform log verbosity this sets the <code>TF_IN_AUTOMATION</code> parameters, possible options are: <code>TRACE</code>, <code>DEBUG</code>, <code>INFO</code>, <code>WARN</code> or <code>ERROR</code></td><td><code>ERROR</code></td></tr><tr><td>-tfstate_subscription_id</td><td>no</td><td>If no value specified, rover is assuming the currently logged-in subscription from az cli context.</td><td>GUID of the subscription containing the tfstate (launchpad). This will be used to locate and store the tfstate files.</td><td><code>a-b-c-d-e  </code></td></tr><tr><td>-target_subscription</td><td>no</td><td>If no value specified, rover is assuming the currently logged-in subscription from az cli context.</td><td>GUID of the subscription where to deploy the resources.</td><td><code>a-b-c-d-e</code></td></tr><tr><td>-workspace</td><td>no</td><td><code>tfstate</code></td><td>Specifies the storage account container where to store the tfstate for this landing zone. This could be used to isolate landing zones from each others by specifying Azure AD RBAC entries on the specific container withing the storage account.</td><td><code>my_container</code></td></tr><tr><td>-p</td><td>no</td><td>N/A</td><td>Specifies the location where to store the plan file, if not specified a plan file will be automatically created for you when you specify <code>-a apply </code> and will be stored <code>in ${TF_DATA_DIR}</code></td><td>${TF_DATA_DIR}/caf_launchpad.tfstate.tfplan</td></tr><tr><td>-launchpad</td><td>no</td><td>N/A</td><td>Flag that indicates that the current deployment is a launchpad.</td><td><code>-launchpad </code></td></tr><tr><td>-tfc</td><td>no</td><td>N/A</td><td>Flag that indicates that the current deployment will use the TFC configured settings to store the state (refer to the Use TFC section of this guide)</td><td><code>-tfc </code></td></tr><tr><td>-skip-permission-check</td><td>no</td><td>N/A</td><td>Flag to skip the check that the currently logged-in principal is owner of the target subscription (only checked for launchpad)</td><td><code>-skip-permission-check </code></td></tr><tr><td>-impersonate-sp-from-keyvault-url</td><td>no</td><td>N/A</td><td>Flag that indicates rover to use impersonate the Service Principal and use the credentials stored in the Azure Key Vault which URL is specified as parameter. Requires launchpad_credentials landing zone to be setup (more details to be published soon.)</td><td><code>-impersonate-sp-from-keyvault-url https://myakv.vault.azure.net/</code></td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="examples">Examples<a class="hash-link" href="#examples" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="untaint">untaint<a class="hash-link" href="#untaint" title="Direct link to heading">â€‹</a></h3><p>When a resource has been marked as tainted and you want to untaint it.</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># module.solution.module.storage_containers[&quot;storageWorkspace_di001&quot;].azurerm_storage_container.stg is tainted, so must be replaced</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+/- resource </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;azurerm_storage_container&quot;</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;stg&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      ~ has_immutability_policy </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> -</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">known after apply</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      ~ has_legal_hold          </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> -</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">known after apply</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      ~ </span><span class="token function" style="color:rgb(80, 250, 123)">id</span><span class="token plain">                      </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;https://xxxxxxxxxxxxxxxx.blob.core.windows.net/di001&quot;</span><span class="token plain"> -</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">known after apply</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      ~ metadata                </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> -</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">known after apply</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        name                    </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;di001&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      ~ resource_manager_id     </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/subscriptions/000000000-0000-0000-0000-000000000000/resourceGroups/cont-rg-data-landing-zone-storage-lqi/providers/Microsoft.Storage/storageAccounts/xxxxxxxxxxxxxxx/blobServices/default/containers/di001&quot;</span><span class="token plain"> -</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">known after apply</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)"># (2 unchanged attributes hidden)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>You need to extract the terraform resource. In our example:</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">module.solution.module.storage_containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;storageWorkspace_di001&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">.azurerm_storage_container.stg</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>and run the following rover command. You need to wrap the resource under double quotes and escape the quotes in the square brakets.</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">rover </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --impersonate-sp-from-keyvault-url https://cont-kv-scl-xxx.vault.azure.net/ </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain">  // Remove this line </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> you are not using </span><span class="token function" style="color:rgb(80, 250, 123)">service</span><span class="token plain"> principals</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -lz /tf/caf/landingzones/caf_solution </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -tfstate_subscription_id 000000000-0000-0000-0000-000000000000 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -target_subscription 000000000-0000-00000-00000000 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -tfstate data-landing-zone_prod_level3.tfstate </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -env contoso </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -level level3 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -w data-landing-zone-prod `</span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -p </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${TF_DATA_DIR}</span><span class="token plain">/data-landing-zone_prod_level3.tfstate.tfplan </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  -a untaint </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;module.solution.module.storage_containers[</span><span class="token string entity" style="color:rgb(255, 121, 198)">\&quot;</span><span class="token string" style="color:rgb(255, 121, 198)">storageWorkspace_di001</span><span class="token string entity" style="color:rgb(255, 121, 198)">\&quot;</span><span class="token string" style="color:rgb(255, 121, 198)">].azurerm_storage_container.stg&quot;</span><span class="token plain"> </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>When executed the rover will display a similar output.</p><div class="codeBlockContainer_I0IT language-shell theme-code-block"><div class="codeBlockContent_wNvx shell"><pre tabindex="0" class="prism-code language-shell codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Terraform has been successfully initialized</span><span class="token operator">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Terraform init </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">return</span><span class="token plain"> code </span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@calling other</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">running terraform untaint -state</span><span class="token operator">=</span><span class="token plain">/home/vscode/.terraform.cache/contoso/rover_jobs/20220316003626962686570/tfstates/level3/data-landing-zone-prod/data-landing-zone_prod_level3.tfstate  module.solution.module.storage_containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;storageWorkspace_di001&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">.azurerm_storage_container.stg</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Resource instance module.solution.module.storage_containers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;storageWorkspace_di001&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">.azurerm_storage_container.stg has been successfully untainted.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Terraform untaint </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">return</span><span class="token plain"> code: </span><span class="token number">0</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="workspace-management">Workspace management<a class="hash-link" href="#workspace-management" title="Direct link to heading">â€‹</a></h2><p>In the previous section, workspace is used as a argument to specify where to place the tfstate (in-lieu of the default <code>tfstate</code> container inside the storage account), rover workspace can be used as a command to manage workspaces:</p><p>Create a workspace:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">rover workspace create application-workspace -level level1 -env contoso-sandpit</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Delete a workspace:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">rover workspace delete application-workspace -level level1 -env contoso-sandpit</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>List all workspaces for a level in an environment:</p><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx bash"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">rover workspace list -level level1 -env contoso-sandpit</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Although this is possible to create the workspace containers with rover, we recommend you create and manage them via Terraform code.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/aztfmod/documentation/tree/main/website/docs/rover/commands.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/documentation/docs/rover/rover-tools"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Rover versions and tools</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/documentation/docs/rover/rover-ignite"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Rover Ignite</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#commonly-used-commands" class="table-of-contents__link toc-highlight">Commonly used commands</a></li><li><a href="#login" class="table-of-contents__link toc-highlight">Login</a></li><li><a href="#landing-zones-commands" class="table-of-contents__link toc-highlight">Landing zones commands</a></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a><ul><li><a href="#untaint" class="table-of-contents__link toc-highlight">untaint</a></li></ul></li><li><a href="#workspace-management" class="table-of-contents__link toc-highlight">Workspace management</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/documentation/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://aka.ms/arnaud" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Arnauds blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://gitter.im/aztfmod/community" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Gitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/azure/caf-terraform-landingzones" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Cloud Adoption Framework for Terraform Landing zones.</div></div></div></footer></div>
<script src="/documentation/assets/js/runtime~main.63325a91.js"></script>
<script src="/documentation/assets/js/main.60d61445.js"></script>
</body>
</html>